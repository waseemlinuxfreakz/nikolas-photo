{"ast":null,"code":"/**\r\n * Module dependencies\r\n */\nvar debug = require('debug')('jsonp');\n/**\r\n * Module exports.\r\n */\n\n\nmodule.exports = jsonp;\n/**\r\n * Callback index.\r\n */\n\nvar count = 0;\n/**\r\n * Noop function.\r\n */\n\nfunction noop() {}\n/**\r\n * JSONP handler\r\n *\r\n * Options:\r\n *  - param {String} qs parameter (`callback`)\r\n *  - prefix {String} qs parameter (`__jp`)\r\n *  - name {String} qs parameter (`prefix` + incr)\r\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\r\n *\r\n * @param {String} url\r\n * @param {Object|Function} optional options / callback\r\n * @param {Function} optional callback\r\n */\n\n\nfunction jsonp(url, opts, fn) {\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n\n  if (!opts) opts = {};\n  var prefix = opts.prefix || '__jp'; // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n\n  var id = opts.name || prefix + count++;\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n  if (timeout) {\n    timer = setTimeout(function () {\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup() {\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel() {\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function (data) {\n    debug('jsonp got', data);\n    cleanup();\n    if (fn) fn(null, data);\n  }; // add qs component\n\n\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n  debug('jsonp req \"%s\"', url); // create script\n\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n  return cancel;\n}","map":{"version":3,"sources":["C:/Users/99webdesigns/Documents/GitHub/nikolas-photo/node_modules/jsonp/index.js"],"names":["debug","require","module","exports","jsonp","count","noop","url","opts","fn","prefix","id","name","param","timeout","enc","encodeURIComponent","target","document","getElementsByTagName","head","script","timer","setTimeout","cleanup","Error","parentNode","removeChild","window","clearTimeout","cancel","data","indexOf","replace","createElement","src","insertBefore"],"mappings":"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","sourcesContent":["/**\r\n * Module dependencies\r\n */\r\n\r\nvar debug = require('debug')('jsonp');\r\n\r\n/**\r\n * Module exports.\r\n */\r\n\r\nmodule.exports = jsonp;\r\n\r\n/**\r\n * Callback index.\r\n */\r\n\r\nvar count = 0;\r\n\r\n/**\r\n * Noop function.\r\n */\r\n\r\nfunction noop(){}\r\n\r\n/**\r\n * JSONP handler\r\n *\r\n * Options:\r\n *  - param {String} qs parameter (`callback`)\r\n *  - prefix {String} qs parameter (`__jp`)\r\n *  - name {String} qs parameter (`prefix` + incr)\r\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\r\n *\r\n * @param {String} url\r\n * @param {Object|Function} optional options / callback\r\n * @param {Function} optional callback\r\n */\r\n\r\nfunction jsonp(url, opts, fn){\r\n  if ('function' == typeof opts) {\r\n    fn = opts;\r\n    opts = {};\r\n  }\r\n  if (!opts) opts = {};\r\n\r\n  var prefix = opts.prefix || '__jp';\r\n\r\n  // use the callback name that was passed if one was provided.\r\n  // otherwise generate a unique name by incrementing our counter.\r\n  var id = opts.name || (prefix + (count++));\r\n\r\n  var param = opts.param || 'callback';\r\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\r\n  var enc = encodeURIComponent;\r\n  var target = document.getElementsByTagName('script')[0] || document.head;\r\n  var script;\r\n  var timer;\r\n\r\n\r\n  if (timeout) {\r\n    timer = setTimeout(function(){\r\n      cleanup();\r\n      if (fn) fn(new Error('Timeout'));\r\n    }, timeout);\r\n  }\r\n\r\n  function cleanup(){\r\n    if (script.parentNode) script.parentNode.removeChild(script);\r\n    window[id] = noop;\r\n    if (timer) clearTimeout(timer);\r\n  }\r\n\r\n  function cancel(){\r\n    if (window[id]) {\r\n      cleanup();\r\n    }\r\n  }\r\n\r\n  window[id] = function(data){\r\n    debug('jsonp got', data);\r\n    cleanup();\r\n    if (fn) fn(null, data);\r\n  };\r\n\r\n  // add qs component\r\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\r\n  url = url.replace('?&', '?');\r\n\r\n  debug('jsonp req \"%s\"', url);\r\n\r\n  // create script\r\n  script = document.createElement('script');\r\n  script.src = url;\r\n  target.parentNode.insertBefore(script, target);\r\n\r\n  return cancel;\r\n}\r\n"]},"metadata":{},"sourceType":"script"}